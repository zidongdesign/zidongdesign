{"remainingRequest":"/Users/chenzidong/WebstormProjects/zidongdesign/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/chenzidong/WebstormProjects/zidongdesign/src/components/DetailPage.vue?vue&type=style&index=0&id=2d38eabf&scoped=true&lang=css&","dependencies":[{"path":"/Users/chenzidong/WebstormProjects/zidongdesign/src/components/DetailPage.vue","mtime":1648982185506},{"path":"/Users/chenzidong/WebstormProjects/zidongdesign/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenzidong/WebstormProjects/zidongdesign/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/chenzidong/WebstormProjects/zidongdesign/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/chenzidong/WebstormProjects/zidongdesign/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/chenzidong/WebstormProjects/zidongdesign/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouZGV0YWlscy1wYWdlIHsKICAgIHdpZHRoOiAxMDAlOwogICAgaGVpZ2h0OiAxMDAlOwogICAgcmlnaHQ6IDA7CiAgICBib3R0b206IDA7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBvdmVyZmxvdzogaGlkZGVuOwp9Ci5kZXRhaWwtd3JhcHBlcnsKICAgIHdpZHRoOiBjYWxjKDEwMCUpOwogICAgaGVpZ2h0OiAxMDAlOwogICAgbGVmdDogMHJlbTsKICAgIGJvdHRvbTogMDsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHotaW5kZXg6IDk1OwogICAgZGlzcGxheTogbm9uZTsKICAgIG92ZXJmbG93LXk6IGhpZGRlbjsKICAgIG92ZXJmbG93LXg6IGhpZGRlbjsKICAgIG1hcmdpbi1ibG9jay1lbmQ6IDA7CiAgICBzY3JvbGxiYXItd2lkdGg6IG5vbmU7IC8qIEZpcmVmb3ggKi8KICAgIC1tcy1vdmVyZmxvdy1zdHlsZTogbm9uZTsgLyogSUUgMTArICovCiAgICAtd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzogYXV0bzsgLyog55So5p2l5o6n5Yi25YWD57Sg5Zyo56e75Yqo6K6+5aSH5LiK5piv5ZCm5L2/55So5rua5Yqo5Zue5by55pWI5p6cICovCiAgICBvdmVyZmxvdy1zY3JvbGxpbmc6IGF1dG87Cn0KLmRldGFpbC13cmFwcGVyOjotd2Via2l0LXNjcm9sbGJhcnsKICAgIGRpc3BsYXk6IG5vbmU7IC8qIENocm9tZSBTYWZhcmkgKi8KfQouZGV0YWlsLWNvbnRhaW5lcnsKICAgIHdpZHRoOiAxMDAlOwogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgei1pbmRleDogMjsKICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7Cn0KLmludHJvLXdyYXBwZXJ7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogMTAwdmg7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICBtaXgtYmxlbmQtbW9kZTpkaWZmZXJlbmNlOwp9Ci5wZXJjZW50ewogICAgcG9zaXRpb246IGZpeGVkOwogICAgcmlnaHQ6IDFyZW07CiAgICBib3R0b206IDJyZW07CiAgICBmb250LXNpemU6IDJyZW07CiAgICBwYWRkaW5nOiAxcmVtOwogICAgY29sb3I6IHZhcigtLXdoaXRlKTsKICAgIG9wYWNpdHk6IDA7CiAgICB6LWluZGV4OiAyOwogICAgbWl4LWJsZW5kLW1vZGU6ZGlmZmVyZW5jZTsKICAgIGZvbnQtd2VpZ2h0OiA0MDA7Cn0KLnNjcm9sbHsKICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgIHJpZ2h0OiAxcmVtOwogICAgYm90dG9tOiAyLjVyZW07CiAgICBmb250LXNpemU6IDFyZW07CiAgICBwYWRkaW5nOiAxcmVtOwogICAgY29sb3I6IHZhcigtLXdoaXRlKTsKICAgIG9wYWNpdHk6IDA7CiAgICB6LWluZGV4OiAyOwogICAgbWl4LWJsZW5kLW1vZGU6ZGlmZmVyZW5jZTsKfQouY29udGVudHsKICAgIC8qYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1jb2xvcik7Ki8KICAgIHdpZHRoOiAxMDAlOwogICAgZm9udC1zaXplOiAwOwogICAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICAgIG1peC1ibGVuZC1tb2RlOm5vcm1hbDsKICAgIGlzb2xhdGlvbjogaXNvbGF0ZTsKfQouYmFjay1idXR0b257CiAgICAvKmJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtY29sb3IpOyovCiAgICBwb3NpdGlvbjogZml4ZWQ7CiAgICB0b3A6IDByZW07CiAgICBsZWZ0OiAwcmVtOwogICAgd2lkdGg6IDEwMHZ3OwogICAgaGVpZ2h0OiA2cmVtOwogICAgei1pbmRleDogOTY7CiAgICBib3JkZXItYm90dG9tOiAxcHggcmdiYSgyNTUsMjU1LDI1NSwwLjIpIHNvbGlkOwogICAgbWl4LWJsZW5kLW1vZGU6ZGlmZmVyZW5jZTsKfQovKi5iYWNrLWJ1dHRvbj5pbWd7Ki8KLyogICAgd2lkdGg6IDJyZW07Ki8KLyogICAgaGVpZ2h0OiAycmVtOyovCi8qICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsqLwovKiAgICBsZWZ0OiA1MCU7Ki8KLyogICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwwKTsqLwovKiAgICBib3R0b206IDNyZW07Ki8KLyogICAgcG9pbnRlci1ldmVudHM6IG5vbmU7Ki8KLyp9Ki8KLmJhY2std29yZHN7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBsZWZ0OiA1MCU7CiAgICB0b3A6IDUwJTsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsLTUwJSk7CgogICAgZm9udC1zaXplOiAxcmVtOwogICAgcGFkZGluZzogMXJlbTsKICAgIGNvbG9yOiB2YXIoLS13aGl0ZSk7CiAgICB6LWluZGV4OiAyOwogICAgbWl4LWJsZW5kLW1vZGU6ZGlmZmVyZW5jZTsKICAgIHBvaW50ZXItZXZlbnRzOiBub25lOwogICAgd29yZC1icmVhazoga2VlcC1hbGw7Cn0KLmRldGFpbHMtYmFja2dyb3VuZCB7CiAgICB3aWR0aDogMTAwJTsKICAgIGhlaWdodDogMTAwJTsKICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtY29sb3IpOwogICAgb3BhY2l0eTogMDsKICAgIHBvc2l0aW9uOiBmaXhlZDsKICAgIGxlZnQ6IDA7CiAgICB0b3A6IDA7CiAgICBwb2ludGVyLWV2ZW50czogbm9uZTsKICAgIHotaW5kZXg6IDk0Owp9Cg=="},{"version":3,"sources":["DetailPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6NA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"DetailPage.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div class=\"details-page\">\n        <div class=\"back-button interactive-l\" @click=\"closeDetailPage\">\n<!--            <img src=\"../assets/icon-close.svg\" alt=\"\">-->\n            <h3 v-if=\"language=='ZH'\" class=\"back-words\">返回</h3>\n            <h3 v-else-if=\"language=='EN'\" class=\"back-words\">Back</h3>\n        </div>\n        <div class=\"detail-wrapper\">\n            <div class=\"detail-container\" id=\"detail-container\">\n                <div class=\"intro-wrapper\">\n                    <h2 class=\"percent\">{{fixedPercent}}</h2>\n                    <h3 v-if=\"language=='ZH'\" class=\"scroll\">滚动浏览更多</h3>\n                    <h3 v-else-if=\"language=='EN'\" class=\"scroll\">Scroll to view more</h3>\n                </div>\n                <div class=\"content\">\n                    <div v-if=\"language=='ZH'\" :is=\"projectContent\" :period = 'this.period' :category = 'this.category.ZH' :title='this.title.ZH' :language='this.languageDetailsPage'></div>\n                    <div v-else-if=\"language=='EN'\" :is=\"projectContent\" :period = 'this.period' :category = 'this.category.EN' :title='this.title.EN' :language='this.languageDetailsPage'></div>\n                </div>\n            </div>\n        </div>\n        <div class=\"details-background\"></div>\n    </div>\n\n\n</template>\n\n<script>\n    import {gsap,Power2} from 'gsap'\n    import {ScrollTrigger} from \"gsap/ScrollTrigger\";\n\n    gsap.registerPlugin(ScrollTrigger);\n\n    export default {\n        name: \"DetailPage\",\n        data(){\n            return{\n                scrollbar : null,\n                images :[],\n                loadingPercent:0,\n                tweenPercent:0,\n                preloadIndex:0,\n                projectContent:null,\n                isOpenDetailPage:false,\n            }\n        },\n        mounted(){\n            document.querySelector('.detail-wrapper').addEventListener('scroll',()=>{\n                ScrollTrigger.refresh()\n            });\n            gsap.to('.back-button',{\n                yPercent:-100,\n                duration:0,\n            });\n            window.addEventListener('popstate',this.closeDetailPage());\n        },\n        computed:{\n            detailsImages: function () {\n                return this.projects[this.preloadIndex].detailsImages\n            },\n            fixedPercent:function () {\n                return this.tweenPercent.toFixed(0);\n            },\n            title:function () {\n                return this.projects[this.preloadIndex].title;\n            },\n            period:function () {\n                return this.projects[this.preloadIndex].period;\n            },\n            category:function () {\n                return this.projects[this.preloadIndex].category;\n            },\n            isMobile : function () {\n                return window.matchMedia('(max-width: 767px)').matches\n            },\n            languageDetailsPage :function () {\n                return this.language\n            }\n        },\n        watch:{\n            loadingPercent:function(newValue) {\n                gsap.to(this.$data, {\n                    duration: 0.8,\n                    tweenPercent: newValue,\n                    onComplete:()=>{\n                        if( this.fixedPercent == 100){\n                            if(!this.isOpenDetailPage){\n                                return;\n                            }\n                            gsap.to(('.percent'),{\n                                delay:0.2,\n                                duration:0.4,\n                                opacity:0,\n                            });\n                            this.$emit('allImagesLoaded');\n                            gsap.fromTo('.details-background',{\n                                opacity:0,\n                            },{\n                                opacity:1,\n                                scrollTrigger:{\n                                    trigger:'.intro-wrapper',\n                                    start:'top top',\n                                    scrub: 2,\n                                    toggleActions:'none none none none'\n                                }\n                            });\n                            gsap.fromTo('.scroll',{\n                                xPercent:0,\n                            },{\n                                xPercent:200,\n                                scrollTrigger:{\n                                    trigger:'.intro-wrapper',\n                                    start:'top top',\n                                    scrub: 2,\n                                    toggleActions:'none none none none'\n                                }\n                            });\n                            gsap.fromTo(('.scroll'),{\n                                opacity:0,\n                                y:16\n                            },{\n                                delay:1.2,\n                                duration:0.4,\n                                opacity:1,\n                                y:0,\n                                onComplete:()=>{\n                                    document.querySelector('.detail-wrapper').style.overflowY = 'scroll';\n                                }\n                            });\n                            this.projectContent = this.projects[this.preloadIndex].details;\n                        }\n                    }\n                });\n            }\n        },\n        props:['language','projects'],\n        methods:{\n            open(i){\n                this.isOpenDetailPage = true;\n                gsap.to(('.scroll'),{\n                    duration:0,\n                    opacity:0,\n                    ease:Power2.easeInOut\n                });\n                gsap.to(('.percent'),{\n                    duration:0.8,\n                    opacity:1,\n                    ease:Power2.easeInOut\n                });\n                let index = this.projects.findIndex(function (item) {\n                    return item.id == i;\n                });\n                this.loadImage(index);\n            },\n            closeDetailPage(){\n                this.$emit('closeDetailPage');\n                gsap.to('.back-button',{\n                    yPercent:-100,\n                    duration:0.2,\n                    ease:Power2.easeInOut,\n                });\n                gsap.to('.details-background',{\n                    opacity:0,\n                    duration:0.2,\n                });\n                gsap.to(('.detail-wrapper'),{\n                    duration:0,\n                    opacity:0,\n                    onComplete:()=>{\n                        const triggers = ScrollTrigger.getAll();\n                        triggers.forEach((trigger) => {\n                            // 把 ScrollTrigger 綁定的動畫消除\n                            trigger.kill();\n                        });\n                        // 消除綁定 MatchMedia();\n                        ScrollTrigger.clearMatchMedia();\n                        this.projectContent = null;\n                        document.querySelector('.detail-wrapper').style.overflowY = 'hidden';\n                        this.isOpenDetailPage = false;\n                        this.images = [];\n                        this.loadingPercent = 0;\n                        document.querySelector('.detail-wrapper').style.scrollTop = 0;\n                        document.querySelector('.detail-wrapper').style.display = 'none';\n                        document.querySelector('.scroll').style.opacity = 0;\n                    }\n                });\n            },\n\n            loadImage(i){\n                this.preloadIndex = i;\n                this.preload(this.detailsImages, ()=> {\n                });\n            },\n            preload(images, allImagesLoadedCallback) {\n                let loadedCounter = 0;\n                const toBeLoadedNumber = images.length;\n                const preloadImage = (i,t, anImageLoadedCallback) => {\n                    const image = new Image();\n                    image.src = t;\n                    image.onload =()=> {\n                        if(this.isOpenDetailPage){\n                            this.images[i] = image;\n                            anImageLoadedCallback();\n                        }\n                    }\n\n                };\n                for(let i = 0; i< toBeLoadedNumber;i++){\n                    preloadImage(i,images[i], () => {\n                        loadedCounter += 1;\n                        this.loadingPercent =loadedCounter / toBeLoadedNumber * 100;\n                        if (loadedCounter === toBeLoadedNumber) {\n                            allImagesLoadedCallback()\n                        }\n                    })\n                }\n            },\n        },\n    }\n</script>\n\n<style scoped>\n    .details-page {\n        width: 100%;\n        height: 100%;\n        right: 0;\n        bottom: 0;\n        position: absolute;\n        overflow: hidden;\n    }\n    .detail-wrapper{\n        width: calc(100%);\n        height: 100%;\n        left: 0rem;\n        bottom: 0;\n        position: absolute;\n        z-index: 95;\n        display: none;\n        overflow-y: hidden;\n        overflow-x: hidden;\n        margin-block-end: 0;\n        scrollbar-width: none; /* Firefox */\n        -ms-overflow-style: none; /* IE 10+ */\n        -webkit-overflow-scrolling: auto; /* 用来控制元素在移动设备上是否使用滚动回弹效果 */\n        overflow-scrolling: auto;\n    }\n    .detail-wrapper::-webkit-scrollbar{\n        display: none; /* Chrome Safari */\n    }\n    .detail-container{\n        width: 100%;\n        position: relative;\n        z-index: 2;\n        box-sizing: border-box;\n    }\n    .intro-wrapper{\n        width: 100%;\n        height: 100vh;\n        position: relative;\n        mix-blend-mode:difference;\n    }\n    .percent{\n        position: fixed;\n        right: 1rem;\n        bottom: 2rem;\n        font-size: 2rem;\n        padding: 1rem;\n        color: var(--white);\n        opacity: 0;\n        z-index: 2;\n        mix-blend-mode:difference;\n        font-weight: 400;\n    }\n    .scroll{\n        position: fixed;\n        right: 1rem;\n        bottom: 2.5rem;\n        font-size: 1rem;\n        padding: 1rem;\n        color: var(--white);\n        opacity: 0;\n        z-index: 2;\n        mix-blend-mode:difference;\n    }\n    .content{\n        /*background: var(--background-color);*/\n        width: 100%;\n        font-size: 0;\n        box-sizing: border-box;\n        mix-blend-mode:normal;\n        isolation: isolate;\n    }\n    .back-button{\n        /*background-color: var(--background-color);*/\n        position: fixed;\n        top: 0rem;\n        left: 0rem;\n        width: 100vw;\n        height: 6rem;\n        z-index: 96;\n        border-bottom: 1px rgba(255,255,255,0.2) solid;\n        mix-blend-mode:difference;\n    }\n    /*.back-button>img{*/\n    /*    width: 2rem;*/\n    /*    height: 2rem;*/\n    /*    position: absolute;*/\n    /*    left: 50%;*/\n    /*    transform: translate(-50%,0);*/\n    /*    bottom: 3rem;*/\n    /*    pointer-events: none;*/\n    /*}*/\n    .back-words{\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        transform: translate(-50%,-50%);\n\n        font-size: 1rem;\n        padding: 1rem;\n        color: var(--white);\n        z-index: 2;\n        mix-blend-mode:difference;\n        pointer-events: none;\n        word-break: keep-all;\n    }\n    .details-background {\n        width: 100%;\n        height: 100%;\n        background: var(--background-color);\n        opacity: 0;\n        position: fixed;\n        left: 0;\n        top: 0;\n        pointer-events: none;\n        z-index: 94;\n    }\n</style>"]}]}