{"remainingRequest":"/Users/chenzidongms/zidongdesign.github.io/node_modules/thread-loader/dist/cjs.js!/Users/chenzidongms/zidongdesign.github.io/node_modules/babel-loader/lib/index.js!/Users/chenzidongms/zidongdesign.github.io/node_modules/eslint-loader/index.js??ref--13-0!/Users/chenzidongms/zidongdesign.github.io/src/utils/utils.js","dependencies":[{"path":"/Users/chenzidongms/zidongdesign.github.io/src/utils/utils.js","mtime":1699625730300},{"path":"/Users/chenzidongms/zidongdesign.github.io/node_modules/cache-loader/dist/cjs.js","mtime":1699625724697},{"path":"/Users/chenzidongms/zidongdesign.github.io/node_modules/thread-loader/dist/cjs.js","mtime":1699625729078},{"path":"/Users/chenzidongms/zidongdesign.github.io/node_modules/babel-loader/lib/index.js","mtime":1699625724594},{"path":"/Users/chenzidongms/zidongdesign.github.io/node_modules/eslint-loader/index.js","mtime":1699625725898}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnOwpleHBvcnQgdmFyIGNsYW1wID0gZnVuY3Rpb24gY2xhbXAodmFsKSB7CiAgdmFyIG1pbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMDsKICB2YXIgbWF4ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAxOwogIHJldHVybiBNYXRoLm1heChtaW4sIE1hdGgubWluKG1heCwgdmFsKSk7Cn07CmV4cG9ydCB2YXIgbWFwID0gZnVuY3Rpb24gbWFwKHZhbHVlLCBtaW4xLCBtYXgxLCBtaW4yLCBtYXgyKSB7CiAgcmV0dXJuIG1pbjIgKyAobWF4MiAtIG1pbjIpICogKHZhbHVlIC0gbWluMSkgLyAobWF4MSAtIG1pbjEpOwp9OwpleHBvcnQgdmFyIGdldFJhdGlvID0gZnVuY3Rpb24gZ2V0UmF0aW8oX3JlZiwgX3JlZjIpIHsKICB2YXIgdyA9IF9yZWYueCwKICAgICAgaCA9IF9yZWYueTsKICB2YXIgd2lkdGggPSBfcmVmMi53aWR0aCwKICAgICAgaGVpZ2h0ID0gX3JlZjIuaGVpZ2h0OwogIHZhciByID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiAwOwogIHZhciBtID0gbXVsdGlwbHlNYXRyaXhBbmRQb2ludChyb3RhdGVNYXRyaXgoVEhSRUUuTWF0aC5kZWdUb1JhZChyKSksIFt3LCBoXSk7CiAgdmFyIG9yaWdpbmFsUmF0aW8gPSB7CiAgICB3OiBtWzBdIC8gd2lkdGgsCiAgICBoOiBtWzFdIC8gaGVpZ2h0CiAgfTsKICB2YXIgY292ZXJSYXRpbyA9IDEgLyBNYXRoLm1heChvcmlnaW5hbFJhdGlvLncsIG9yaWdpbmFsUmF0aW8uaCk7CiAgcmV0dXJuIG5ldyBUSFJFRS5WZWN0b3IyKG9yaWdpbmFsUmF0aW8udyAqIGNvdmVyUmF0aW8sIG9yaWdpbmFsUmF0aW8uaCAqIGNvdmVyUmF0aW8pOwp9OwoKdmFyIHJvdGF0ZU1hdHJpeCA9IGZ1bmN0aW9uIHJvdGF0ZU1hdHJpeChhKSB7CiAgcmV0dXJuIFtNYXRoLmNvcyhhKSwgLU1hdGguc2luKGEpLCBNYXRoLnNpbihhKSwgTWF0aC5jb3MoYSldOwp9OwoKdmFyIG11bHRpcGx5TWF0cml4QW5kUG9pbnQgPSBmdW5jdGlvbiBtdWx0aXBseU1hdHJpeEFuZFBvaW50KG1hdHJpeCwgcG9pbnQpIHsKICB2YXIgYzByMCA9IG1hdHJpeFswXTsKICB2YXIgYzFyMCA9IG1hdHJpeFsxXTsKICB2YXIgYzByMSA9IG1hdHJpeFsyXTsKICB2YXIgYzFyMSA9IG1hdHJpeFszXTsKICB2YXIgeCA9IHBvaW50WzBdOwogIHZhciB5ID0gcG9pbnRbMV07CiAgcmV0dXJuIFtNYXRoLmFicyh4ICogYzByMCArIHkgKiBjMHIxKSwgTWF0aC5hYnMoeCAqIGMxcjAgKyB5ICogYzFyMSldOwp9OwoKZXhwb3J0IHZhciB3cmFwID0gZnVuY3Rpb24gd3JhcChlbCwgd3JhcHBlcikgewogIGVsLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHdyYXBwZXIsIGVsKTsKICB3cmFwcGVyLmFwcGVuZENoaWxkKGVsKTsKfTsKZXhwb3J0IHZhciB1bndyYXAgPSBmdW5jdGlvbiB1bndyYXAoY29udGVudCkgewogIGZvciAodmFyIGkgPSAwOyBpIDwgY29udGVudC5sZW5ndGg7IGkrKykgewogICAgdmFyIGVsID0gY29udGVudFtpXTsKICAgIHZhciBwYXJlbnQgPSBlbC5wYXJlbnROb2RlOwogICAgaWYgKHBhcmVudC5wYXJlbnROb2RlKSBwYXJlbnQub3V0ZXJIVE1MID0gZWwuaW5uZXJIVE1MOwogIH0KfTsKZXhwb3J0IHZhciBldiA9IGZ1bmN0aW9uIGV2KGV2ZW50TmFtZSwgZGF0YSkgewogIHZhciBvbmNlID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmYWxzZTsKICB2YXIgZSA9IG5ldyBDdXN0b21FdmVudChldmVudE5hbWUsIHsKICAgIGRldGFpbDogZGF0YQogIH0sIHsKICAgIG9uY2U6IG9uY2UKICB9KTsKICBkb2N1bWVudC5kaXNwYXRjaEV2ZW50KGUpOwp9Ow=="},{"version":3,"sources":["/Users/chenzidongms/zidongdesign.github.io/src/utils/utils.js"],"names":["THREE","clamp","val","min","max","Math","map","value","min1","max1","min2","max2","getRatio","w","x","h","y","width","height","r","m","multiplyMatrixAndPoint","rotateMatrix","degToRad","originalRatio","coverRatio","Vector2","a","cos","sin","matrix","point","c0r0","c1r0","c0r1","c1r1","abs","wrap","el","wrapper","parentNode","insertBefore","appendChild","unwrap","content","i","length","parent","outerHTML","innerHTML","ev","eventName","data","once","e","CustomEvent","detail","document","dispatchEvent"],"mappings":"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","sourcesContent":["import * as THREE from 'three'\n\nexport const clamp = (val, min = 0, max = 1) => Math.max(min, Math.min(max, val));\n\nexport const map = (value, min1, max1, min2, max2) => min2 + (max2 - min2) * (value - min1) / (max1 - min1);\n\nexport const getRatio = ({ x: w, y: h }, { width, height }, r = 0) => {\n    const m = multiplyMatrixAndPoint(rotateMatrix(THREE.Math.degToRad(r)), [w, h])\n    const originalRatio = {\n        w: m[0] / width,\n        h: m[1] / height,\n    }\n\n    const coverRatio = 1 / Math.max(originalRatio.w, originalRatio.h)\n\n    return new THREE.Vector2(\n        originalRatio.w * coverRatio,\n        originalRatio.h * coverRatio,\n    )\n}\n\n\nconst rotateMatrix = (a) => [Math.cos(a), -Math.sin(a), Math.sin(a), Math.cos(a)]\n\nconst multiplyMatrixAndPoint = (matrix, point) => {\n    const c0r0 = matrix[0]\n    const c1r0 = matrix[1]\n    const c0r1 = matrix[2]\n    const c1r1 = matrix[3]\n    const x = point[0]\n    const y = point[1]\n    return [Math.abs(x * c0r0 + y * c0r1), Math.abs(x * c1r0 + y * c1r1)]\n}\n\nexport const wrap = (el, wrapper) => {\n    el.parentNode.insertBefore(wrapper, el)\n    wrapper.appendChild(el)\n}\n\n\nexport const unwrap = (content) => {\n    for (let i = 0; i < content.length; i++) {\n        const el     = content[i]\n        const parent = el.parentNode\n\n        if (parent.parentNode) parent.outerHTML = el.innerHTML\n    }\n}\n\nexport const ev = (eventName, data, once = false) => {\n    const e = new CustomEvent(eventName, { detail: data }, { once })\n    document.dispatchEvent(e)\n}\n"]}]}